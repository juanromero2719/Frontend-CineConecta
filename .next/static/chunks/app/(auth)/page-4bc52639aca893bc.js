(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{100:(e,r,t)=>{Promise.resolve().then(t.bind(t,8118))},283:(e,r,t)=>{"use strict";t.d(r,{A:()=>c,O:()=>d});var a=t(5155),s=t(2115),o=t(6391),n=t(5695);let i=(0,s.createContext)(void 0),l=["/"];function d(e){let{children:r}=e,[t,d]=(0,s.useState)(!1),c=(0,n.usePathname)();return(0,s.useEffect)(()=>{(async()=>{if(!l.includes(c))try{let e=await o.S.get("/verify-token");d(e.data.authenticated)}catch(e){d(!1)}})()},[c]),(0,a.jsx)(i.Provider,{value:{isAuthenticated:t,setIsAuthenticated:d},children:r})}function c(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth debe ser usado dentro de un AuthProvider");return e}},2695:(e,r,t)=>{"use strict";var a=t(6391),s=t(4752),o=t.n(s);let n=(e,r)=>{if(r){o().fire("Error",r,"error");return}switch(e){case 400:o().fire("Solicitud incorrecta","Verifica los datos enviados.","warning");break;case 401:o().fire("No autorizado","Tu sesi\xf3n ha expirado o es inv\xe1lida.","error");break;case 403:o().fire("Prohibido","No tienes permisos para esta acci\xf3n.","error");break;case 404:o().fire("No encontrado","Recurso no disponible o incorrecto.","info");break;case 500:o().fire("Error del servidor","Intenta m\xe1s tarde.","error");break;default:o().fire("Error inesperado","Ocurri\xf3 un error no controlado.","error")}};a.S.interceptors.response.use(e=>e,e=>{var r,t;return(null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.status)?n(e.response.status,null===(t=e.response.data)||void 0===t?void 0:t.error):o().fire("Sin conexi\xf3n","Revisa tu internet o intenta m\xe1s tarde.","error"),Promise.reject(e)})},4490:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var a=t(2115);function s(){let[e,r]=(0,a.useState)(!1),[t,s]=(0,a.useState)(null),[o,n]=(0,a.useState)(null),i=(0,a.useCallback)(async e=>{o&&o.abort(),n(new AbortController),r(!0),s(null);try{return await e.call}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw e;throw s(e instanceof Error?e:Error("An error occurred")),e}finally{r(!1),n(null)}},[]),l=(0,a.useCallback)(()=>{o&&o.abort()},[o]);return(0,a.useEffect)(()=>()=>{o&&o.abort()},[o]),{loading:e,error:t,callEndpoint:i,cancelEndpoint:l}}},6391:(e,r,t)=>{"use strict";t.d(r,{S:()=>a});let a=t(3464).A.create({baseURL:"https://backend-alpha-pearl-61.vercel.app/api",withCredentials:!0})},8118:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>N});var a=t(5155),s=t(2115),o=t(9923),n=t(2657),i=t(8749);let l=e=>{let{label:r,name:t,id:o,value:l,onChange:d,readOnly:c=!1,type:u="text",error:p,maxDate:h,autoComplete:x="on",required:b=!1}=e,[m,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1),w="email"===u;return(0,a.jsxs)("div",{className:"relative w-full focus-within:border-green-700",children:[(0,a.jsx)("label",{className:"\n          absolute left-3 px-1 transition-all pointer-events-none\n          ".concat(m||l?"top-[-10px] text-xs text-white":"top-3 text-md","\n          ").concat(p?"text-red-900 bg-red-50":"text-gray-500 bg-ccGray","\n        "),children:r}),(0,a.jsx)("input",{type:"password"===u?g?"text":"password":u,name:t,value:l,id:o,onChange:d,readOnly:c,onFocus:()=>f(!0),onBlur:()=>f(!!l),autoComplete:x,spellCheck:"password"===u?"false":"true",inputMode:w?"email":void 0,pattern:w?"[^@\\s]+@[^@\\s]+\\.[^@\\s]+":void 0,required:b,..."date"===u&&{max:h},className:"\n          w-full p-3 rounded-xl appearance-none placeholder-transparent transition-all cursor-pointer\n          ".concat(p?"bg-red-50 border border-red-500 text-red-900 placeholder-red-700 focus:ring-red-500 focus:border-red-500":"bg-transparent border border-ccLightGray ","\n        ")}),"password"===u&&(0,a.jsx)("button",{type:"button",onClick:()=>v(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:g?(0,a.jsx)(n.A,{size:20}):(0,a.jsx)(i.A,{size:20})})]})};t(2695);var d=t(6391);let c={async loginUser(e){try{return await d.S.post("/login",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}})}catch(e){if(e&&"object"==typeof e&&e.isAxiosError){var r,t;throw Error((null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.error)||"Ocurri\xf3 un error inesperado.")}throw Error("Ocurri\xf3 un error inesperado.")}}};var u=t(4490),p=t(283),h=t(5695);let x=()=>{let[e,r]=(0,s.useState)(null),{loading:t,callEndpoint:a}=(0,u.A)(),{setIsAuthenticated:o}=(0,p.A)(),n=(0,h.useRouter)();return{loginUser:async(e,t)=>{try{let s=await a({call:c.loginUser({email:e,password:t})});if(s.data)return r(s.data),o(!0),n.push("/dashboard"),s.data;throw Error("No se recibieron datos del servidor")}catch(e){throw console.error("Error en login:",e),e}},loading:t,loginData:e}},b=()=>{let[e,r]=(0,s.useState)(""),[t,o]=(0,s.useState)(""),{loginUser:n,loading:i}=x(),d=async r=>{r.preventDefault();try{await n(e,t)}catch(e){}};return(0,a.jsx)("div",{className:"bg-transparent px-8 py-2 max-w-md w-full",children:(0,a.jsxs)("form",{onSubmit:d,children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(l,{id:"email",type:"email",value:e,onChange:e=>r(e.target.value),label:"Correo electr\xf3nico",required:!0})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(l,{id:"password",type:"password",value:t,onChange:e=>o(e.target.value),label:"Contrase\xf1a",required:!0})}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"w-full text-lg bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:i?"Cargando...":"Ingresar"})]})})},m={async registerUser(e){try{return await d.S.post("/register",e)}catch(e){if(e&&"object"==typeof e&&e.isAxiosError){var r,t;throw Error((null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.error)||"Ocurri\xf3 un error inesperado.")}throw Error("Ocurri\xf3 un error inesperado.")}}},f=()=>{let[e,r]=(0,s.useState)(null),{loading:t,callEndpoint:a}=(0,u.A)();return{registerUser:async(e,t,s)=>{let o=await a({call:m.registerUser({name:e,email:t,password:s})});return r(o.data||null),o.data},loading:t,registerData:e}};var g=t(4752),v=t.n(g);let w=(e,r)=>{v().fire({icon:"success",title:e,text:r})},y=()=>{let{registerUser:e,loading:r}=f(),[t,o]=(0,s.useState)({name:"",email:"",password:""}),n=e=>{let{name:r,value:t}=e.target;o(e=>({...e,[r]:t}))},i=async r=>{r.preventDefault();try{let r=await e(t.name,t.email,t.password);null!==r&&w("Registro exitoso","Usuario registrado correctamente")}catch(e){}};return(0,a.jsx)("div",{className:"max-w-md w-full mx-auto bg-transparent rounded-lg  px-8 py-2",children:(0,a.jsxs)("form",{onSubmit:i,children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(l,{id:"name",type:"text",name:"name",value:t.name,onChange:n,label:"Nombre de usuario",required:!0})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(l,{id:"email",type:"email",name:"email",value:t.email,onChange:n,label:"Correo electr\xf3nico",required:!0})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(l,{id:"password",type:"password",name:"password",value:t.password,onChange:n,label:"Contrase\xf1a",required:!0})}),(0,a.jsx)("button",{type:"submit",disabled:r,className:"w-full text-lg bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:r?"Cargando...":"Registrarse"})]})})};function j(){let[e,r]=(0,s.useState)("login"),t=e=>{r(e)};return(0,a.jsx)("div",{className:"min-h-[86vh] flex items-center justify-center bg-ccDarkGray",children:(0,a.jsxs)("div",{className:"bg-ccGray p-8 rounded-xl shadow-md w-full max-w-lg border border-ccLightGray",children:[(0,a.jsxs)("div",{className:"relative flex items-center justify-between px-4 py-1 bg-ccLightGray rounded-lg text-white",children:[(0,a.jsx)(o.P.div,{layout:!0,transition:{type:"spring",stiffness:300,damping:30},className:"absolute top-1 bottom-1 left-1 w-1/3 bg-white rounded-lg z-0",style:{left:"login"===e?"10%":"56%",transform:"login"===e?"translateX(2%)":"translateX(-40px)"}}),(0,a.jsx)("button",{onClick:()=>t("login"),className:"w-1/2 text-lg py-2 px-4 z-10 transition-colors duration-300 ".concat("login"===e?"text-black ":"text-white"),children:"Iniciar sesi\xf3n"}),(0,a.jsx)("button",{onClick:()=>t("register"),className:"w-1/2 text-lg py-2 px-4 z-10 transition-colors duration-300 ".concat("register"===e?"text-black":"text-white"),children:"Registrarse"})]}),(0,a.jsx)("div",{className:"mt-6 h-[300px] overflow-hidden",children:"login"===e?(0,a.jsx)(b,{}):(0,a.jsx)(y,{})})]})})}function N(){return(0,a.jsx)(j,{})}}},e=>{var r=r=>e(e.s=r);e.O(0,[320,464,941,441,684,358],()=>r(100)),_N_E=e.O()}]);