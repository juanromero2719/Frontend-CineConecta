(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{100:(e,r,t)=>{Promise.resolve().then(t.bind(t,2596))},283:(e,r,t)=>{"use strict";t.d(r,{A:()=>d,O:()=>c});var a=t(5155),o=t(2115),n=t(6391),s=t(5695);let i=(0,o.createContext)(void 0),l=["/","/login","/register"];function c(e){let{children:r}=e,[t,c]=(0,o.useState)(!1),d=(0,s.usePathname)(),u=(0,s.useRouter)();return(0,o.useEffect)(()=>{(async()=>{if(!l.includes(d))try{let e=await n.S.get("/verify-token");c(e.data.authenticated),e.data.authenticated||u.push("/")}catch(e){c(!1),u.push("/")}})()},[d,u]),(0,a.jsx)(i.Provider,{value:{isAuthenticated:t,setIsAuthenticated:c},children:r})}function d(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth debe ser usado dentro de un AuthProvider");return e}},2596:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var a=t(5155),o=t(2115),n=t(8271);t(2695);var s=t(6391);let i=function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=new Date;a.setTime(a.getTime()+864e5*t);let o="expires=".concat(a.toUTCString());document.cookie="".concat(e,"=").concat(r,";").concat(o,";path=/;SameSite=Lax")},l={async loginUser(e){var r,t,a;try{let t=await s.S.post("/login",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}});return(null===(r=t.data)||void 0===r?void 0:r.token)&&(i("cine_token",t.data.token,1),await new Promise(e=>setTimeout(e,100))),t}catch(e){if(e&&"object"==typeof e&&e.isAxiosError)throw Error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Ocurri\xf3 un error inesperado.");throw Error("Ocurri\xf3 un error inesperado.")}}};var c=t(4490),d=t(283),u=t(5695);let h=()=>{let[e,r]=(0,o.useState)(null),{loading:t,callEndpoint:a}=(0,c.A)(),{setIsAuthenticated:n}=(0,d.A)(),s=(0,u.useRouter)();return{loginUser:async(e,t)=>{try{let o=await a({call:l.loginUser({email:e,password:t})});if(o.data)return r(o.data),n(!0),s.push("/dashboard"),o.data;throw Error("No se recibieron datos del servidor")}catch(e){throw console.error("Error en login:",e),e}},loading:t,loginData:e}};var f=t(4637),v=t(6874),p=t.n(v);let m=()=>{let[e,r]=(0,o.useState)(""),[t,s]=(0,o.useState)(""),{loginUser:i,loading:l}=h(),c=async r=>{r.preventDefault();try{await i(e,t)}catch(e){}};return(0,a.jsxs)("section",{className:"flex flex-col md:flex-row bg-white w-[90vw] md:w-[80vw] h-auto md:h-[500px] lg:w-[70vw] 2xl:w-[50vw] rounded-2xl min-w-[300px] overflow-hidden",children:[(0,a.jsx)("div",{className:"w-full md:w-[40%] h-[200px] md:h-auto bg-[rgba(var(--light-latte))] flex justify-center items-center",children:(0,a.jsx)(f.A,{})}),(0,a.jsx)("div",{className:"w-full md:w-[60%] flex justify-center items-center py-8",children:(0,a.jsxs)("form",{onSubmit:c,className:"w-[80%]",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-6 text-gray-700",children:"Iniciar Sesi\xf3n"}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(n.A,{id:"email",type:"email",value:e,onChange:e=>r(e.target.value),label:"Correo electr\xf3nico",required:!0})}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(n.A,{id:"password",type:"password",value:t,onChange:e=>s(e.target.value),label:"Contrase\xf1a",required:!0})}),(0,a.jsx)("div",{className:"flex justify-end mb-6",children:(0,a.jsx)("p",{className:"text-[rgba(var(--dark-latte))] text-sm",children:(0,a.jsx)(p(),{href:"/forgot-password",className:"hover:text-[rgba(var(--latte))] hover:underline transition-colors",children:"\xbfOlvidaste tu contrase\xf1a?"})})}),(0,a.jsx)("button",{type:"submit",disabled:l,className:"w-full text-lg bg-[rgba(var(--dark-latte))] text-white py-2 px-4 rounded-md hover:bg-[rgba(var(--latte))] outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 mb-4",children:l?"Cargando...":"Ingresar"}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("p",{className:"text-black text-sm",children:["No tienes una cuenta?"," ",(0,a.jsx)(p(),{href:"/register",className:"text-[rgba(var(--dark-latte))] font-semibold hover:underline hover:text-[rgba(var(--latte))] transition-colors",children:"Reg\xedstrate"})]})})]})})]})};function x(){return(0,a.jsx)(m,{})}},2695:(e,r,t)=>{"use strict";var a=t(6391),o=t(4752),n=t.n(o);let s=(e,r)=>{if(r){n().fire("Error",r,"error");return}switch(e){case 400:n().fire("Solicitud incorrecta","Verifica los datos enviados.","warning");break;case 401:n().fire("No autorizado","Tu sesi\xf3n ha expirado o es inv\xe1lida.","error");break;case 403:n().fire("Prohibido","No tienes permisos para esta acci\xf3n.","error");break;case 404:n().fire("No encontrado","Recurso no disponible o incorrecto.","info");break;case 500:n().fire("Error del servidor","Intenta m\xe1s tarde.","error");break;default:n().fire("Error inesperado","Ocurri\xf3 un error no controlado.","error")}};a.S.interceptors.response.use(e=>e,e=>{var r,t;return(null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.status)?s(e.response.status,null===(t=e.response.data)||void 0===t?void 0:t.error):n().fire("Sin conexi\xf3n","Revisa tu internet o intenta m\xe1s tarde.","error"),Promise.reject(e)})},4490:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var a=t(2115);function o(){let[e,r]=(0,a.useState)(!1),[t,o]=(0,a.useState)(null),[n,s]=(0,a.useState)(null),i=(0,a.useCallback)(async e=>{n&&n.abort(),s(new AbortController),r(!0),o(null);try{return await e.call}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw e;throw o(e instanceof Error?e:Error("An error occurred")),e}finally{r(!1),s(null)}},[]),l=(0,a.useCallback)(()=>{n&&n.abort()},[n]);return(0,a.useEffect)(()=>()=>{n&&n.abort()},[n]),{loading:e,error:t,callEndpoint:i,cancelEndpoint:l}}},4637:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var a=t(5155);let o=()=>(0,a.jsx)("div",{className:"bg-transparent flex items-center justify-center ",children:(0,a.jsx)("img",{src:"/images/logo.svg",alt:"Logo CineConecta",width:300,height:300})})},5695:(e,r,t)=>{"use strict";var a=t(8999);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},6391:(e,r,t)=>{"use strict";t.d(r,{S:()=>a});let a=t(3464).A.create({baseURL:"https://backend-alpha-pearl-61.vercel.app/api",withCredentials:!0})},8271:(e,r,t)=>{"use strict";t.d(r,{A:()=>h});var a=t(5155),o=t(2115);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,o.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...h}=e;return(0,o.createElement)("svg",{ref:r,...i,width:a,height:a,stroke:t,strokeWidth:l?24*Number(n)/Number(a):n,className:s("lucide",c),...h},[...u.map(e=>{let[r,t]=e;return(0,o.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),c=(e,r)=>{let t=(0,o.forwardRef)((t,a)=>{let{className:i,...c}=t;return(0,o.createElement)(l,{ref:a,iconNode:r,className:s("lucide-".concat(n(e)),i),...c})});return t.displayName="".concat(e),t},d=c("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u=c("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),h=e=>{let{label:r,name:t,id:n,value:s,onChange:i,readOnly:l=!1,type:c="text",error:h,maxDate:f,autoComplete:v="on",required:p=!1}=e,[m,x]=(0,o.useState)(!1),[b,g]=(0,o.useState)(!1),w="email"===c;return(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("label",{className:"\n          absolute left-3 px-1 transition-all pointer-events-none bg-white\n          ".concat(m||s?"top-[-10px] text-xs":"top-3 text-md","\n          ").concat(h?"text-red-900 bg-red-50":m||s?"text-[rgba(var(--dark-latte))]":"text-gray-500","\n        "),children:r}),(0,a.jsx)("input",{type:"password"===c?b?"text":"password":c,name:t,value:s,id:n,onChange:i,readOnly:l,onFocus:()=>x(!0),onBlur:()=>x(!!s),autoComplete:v,spellCheck:"password"===c?"false":"true",inputMode:w?"email":void 0,pattern:w?"[^@\\s]+@[^@\\s]+\\.[^@\\s]+":void 0,required:p,..."date"===c&&{max:f},className:"\n          w-full p-3 rounded-xl appearance-none placeholder-transparent transition-all cursor-pointer outline-none text-gray-500\n          ".concat(h?"bg-red-50 border border-red-500 text-red-900 placeholder-red-700 focus:ring-red-500 focus:border-red-500":"bg-transparent border border-[rgba(var(--dark-latte))] focus:border-[rgba(var(--dark-latte))] focus:ring-1 focus:ring-[rgba(var(--dark-latte))]","\n          ").concat(m||s?"border-1":"top-3 text-md","\n        ")}),"password"===c&&(0,a.jsx)("button",{type:"button",onClick:()=>g(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:b?(0,a.jsx)(d,{size:20}):(0,a.jsx)(u,{size:20})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[320,464,874,441,684,358],()=>r(100)),_N_E=e.O()}]);